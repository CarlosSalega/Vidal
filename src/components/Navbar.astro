---
import { Icon } from "astro-icon/components";
import logo from "../../public/logo.png";
import { Image } from "astro:assets";
---

<header class="sticky top-2 z-50 mx-2 h-16 bg-transparent md:mx-4 lg:mx-8">
	<div
		class="container mx-auto flex h-full items-center justify-between rounded-lg bg-gray-100 px-2 py-2 ring-1 ring-gray-200 md:pr-6"
	>
		<a href="/" aria-label="Inicio" class="ml-3 pt-1 lg:ml-0">
			<Image
				src={logo.src}
				alt="Vidal Padilla Logo"
				class="h-20 w-20"
				title="Logo Vidal Padilla"
				width={80}
				height={80}
			/>
		</a>
		<nav class="hidden md:flex" aria-label="Navegación Principal">
			<ul class="flex space-x-8 md:px-6 lg:px-0">
				<li class="text-base text-gray-500 hover:text-accent">
					<a href="#servicios">Servicios</a>
				</li>
				<li class="text-base text-gray-500 hover:text-accent">
					<a href="#proceso">Proceso</a>
				</li>
				<li class="text-base text-gray-500 hover:text-accent">
					<a href="#faq">FAQ</a>
				</li>
				<li class="text-base text-gray-500 hover:text-accent">
					<a href="#contacto">Contacto</a>
				</li>
			</ul>
		</nav>
		<button
			id="menu-button"
			class="relative z-10 flex items-center p-2 text-gray-500 hover:text-accent md:hidden"
			type="button"
			title="Abrir Menú"
			aria-controls="mobile-menu"
			aria-expanded="false"
		>
			<Icon name="menu-icon" size={32} id="menu-icon" class="mr-3" />
			<Icon
				name="close-menu"
				size={32}
				id="close-icon"
				class="mr-3 hidden"
			/>
			<span class="sr-only">Abrir Menú de Navegación</span>
		</button>
	</div>

	<div
		id="mobile-menu"
		class="fixed inset-2 top-2 z-20 mx-auto hidden h-[390px] rounded-lg bg-gray-100 shadow-lg ring-1 ring-gray-200 sm:container md:hidden"
		aria-labelledby="mobile-menu-button"
	>
		<div
			class="container mx-auto flex h-16 items-center justify-between px-2 py-2"
		>
			<a href="/" aria-label="Inicio" class="ml-3 pt-1">
				<Image
					src={logo.src}
					alt="Vidal Padilla Logo"
					class="h-20 w-20"
					width={80}
					height={80}
				/>
			</a>
			<button
				id="close-menu-button"
				class="relative z-10 mr-2 flex items-center text-gray-500"
				type="button"
				title="Cerrar Menú"
				aria-controls="mobile-menu"
				aria-expanded="true"
			>
				<Icon
					name="close-menu"
					size={32}
					id="close-icon-in-menu"
					class="mr-3 hover:text-accent"
				/>
				<span class="sr-only">Cerrar Menú de Navegación</span>
			</button>
		</div>

		<nav
			id="mobile-menu-nav"
			class="flex flex-col items-center justify-center py-12"
			aria-label="Navegación Móvil"
		>
			<ul class="space-y-8">
				<li
					class="text-center text-2xl text-gray-500 transition-transform hover:scale-125 hover:text-accent"
				>
					<a href="#servicios">Servicios</a>
				</li>
				<li
					class="text-center text-2xl text-gray-500 transition-transform hover:scale-125 hover:text-accent"
				>
					<a href="#proceso">Proceso</a>
				</li>
				<li
					class="text-center text-2xl text-gray-500 transition-transform hover:scale-125 hover:text-accent"
				>
					<a href="#faq">FAQ</a>
				</li>
				<li
					class="text-center text-2xl text-gray-500 transition-transform hover:scale-125 hover:text-accent"
				>
					<a href="#contacto">Contacto</a>
				</li>
			</ul>
		</nav>
	</div>
</header>

<script>
	document.addEventListener("DOMContentLoaded", () => {
		const menuButton = document.getElementById(
			"menu-button"
		) as HTMLElement;
		const mobileMenu = document.getElementById(
			"mobile-menu"
		) as HTMLElement;
		const mobileMenuNav = document.getElementById(
			"mobile-menu-nav"
		) as HTMLElement;
		const menuIcon = document.getElementById("menu-icon") as HTMLElement;
		const closeIcon = document.getElementById("close-icon") as HTMLElement;
		const closeIconInMenu = document.getElementById(
			"close-icon-in-menu"
		) as HTMLElement;

		let isHidden = true;

		const toggleMenuVisibility = () => {
			isHidden = !isHidden;
			mobileMenu.classList.toggle("hidden", isHidden);
			menuIcon.classList.toggle("hidden", !isHidden);
			closeIcon.classList.toggle("hidden", isHidden);
		};

		menuButton.addEventListener("click", toggleMenuVisibility);
		closeIconInMenu.addEventListener("click", toggleMenuVisibility);
		mobileMenuNav.addEventListener("click", toggleMenuVisibility);
	});
</script>

<style>
	.sr-only {
		position: absolute;
		width: 1px;
		height: 1px;
		padding: 0;
		margin: -1px;
		overflow: hidden;
		clip: rect(0, 0, 0, 0);
		border: 0;
	}
</style>
